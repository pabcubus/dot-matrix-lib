function init(e){var t,i,a;(t=document.createElement("div")).setAttribute("class","dot-popup"),t.setAttribute("style","display: none;"),document.createElement("h4").innerHTML="Data",(i=document.createElement("div")).setAttribute("id","xValue"),(a=document.createElement("div")).setAttribute("id","yValue"),t.appendChild(i),t.appendChild(a);var r=document.getElementById(e);r.setAttribute("style","position: relative;"),r.appendChild(t)}function mouseMoveEvent(e){var t=e.offsetX,i=e.offsetY,a=document.getElementsByClassName("dot-popup")[0],r=document.getElementById("xValue"),n=document.getElementById("yValue"),s=!0;points.forEach(function(d){s&&(d.x<=t-radius/2&&t-radius/2<=d.x+2*radius&&d.y<=i-radius/2&&i-radius/2<=d.y+2*radius?(a.setAttribute("style","display: block; top: "+(e.offsetY+10)+"px; left:"+(e.offsetX+10)+"px;"),r.innerHTML=d.xTitle,n.innerHTML=d.yTitle,s=!1):a.setAttribute("style","display: none;"))}),s=!0}function getStringsWidth(e,t,i){var a=0,r=e.getContext("2d");return r.font="number"==typeof i?i+"px Arial":"10px Arial",Array.isArray(t)&&t.forEach(function(e,t){var i=r.measureText(e).width;i>a&&(a=i)}),a}function drawRect(e,t,i,a,r){e.getContext("2d").strokeRect(t,i,a,r)}function drawCircle(e,t,i,a,r,n){var s=e.getContext("2d");s.beginPath(),n&&(t+=a,i+=a),s.arc(t,i,a,0,2*Math.PI),s.fillStyle="string"==typeof r?r:"#FFFFFF",s.fill()}function drawText(e,t,i,a,r,n){var s=e.getContext("2d");s.textAlign=n||"start",s.font="number"==typeof r?r+"px Arial":"12px Arial",s.fillStyle="#000000",s.fillText(t,i,a),s.textAlign="start"}function drawLine(e,t,i,a,r){var n=e.getContext("2d");n.beginPath(),n.moveTo(t,i),n.lineTo(a,r),n.stroke()}function rotate(e,t){e.getContext("2d").rotate(t)}function drawGraph(e,t,i,a){init(e);var r=document.getElementById(e),n=getComputedStyle(r),s=parseInt(n.paddingTop.replace("px",""))+parseInt(n.paddingBottom.replace("px","")),d=parseInt(n.paddingLeft.replace("px",""))+parseInt(n.paddingRight.replace("px","")),i=Number.isInteger(i)?i:r.clientWidth-s,a=Number.isInteger(a)?a:r.clientHeight-d,o=document.getElementById(canvasId);o&&r.removeChild(o);var c=document.createElement("canvas");c.setAttribute("width",i),c.setAttribute("height",a),1!=t.dot_popup&&void 0!=t.dot_popup&&null!=t.dot_popup||c.addEventListener("mousemove",mouseMoveEvent),c.setAttribute("id",canvasId),r.appendChild(c);var f=.3*i,l=getStringsWidth(o=document.getElementById(canvasId),t.series.categories,12);drawCircle(o,f,8,4,"#009700",!0),drawText(o,t.series.categories[0],f+15,17,12),drawCircle(o,f+l+60,8,4,"#FF0000",!0),drawText(o,t.series.categories[1],f+l+75,17,12);var p=[];t.series.data.forEach(function(e,t){p.push(e.text)}),yOffset=.8*a,xOffset=10+getStringsWidth(o,p,12),yTicks=t.series.data.length,yTickSpacing=(yOffset-25)/(yTicks+1),xTicks=t.series.x.length,xTickSpacing=(i-xOffset)/(xTicks+1),drawLine(o,xOffset,25,xOffset,yOffset),drawLine(o,xOffset,yOffset,i,yOffset);for(var u=1;u<=xTicks;u++)drawLine(o,u*xTickSpacing+xOffset,yOffset,u*xTickSpacing+xOffset,yOffset+5);for(u=1;u<=yTicks;u++){x=yOffset-u*yTickSpacing;drawLine(o,xOffset,x,xOffset-5,x)}for(u=1;u<=yTicks;u++){var x=yOffset-u*yTickSpacing,g=xOffset-10;drawText(o,(k=t.series.data[u-1]).text,g,x,10,"right");for(var y=0;y<xTicks;y++){var m=k.values[y],v=xOffset+(y+1)*xTickSpacing,T=x,h=radius;drawCircle(o,v,T,h,m?"#009700":"#FF0000"),points.push({x:v-h,y:T-h,xTitle:1==k.values[y]?t.series.categories[0]:t.series.categories[1],yTitle:k.text})}}for(rotate(o,Math.PI/2),u=1;u<=xTicks;u++){var k=t.series.x[u-1];drawText(o,k,yOffset+10,-1*(u*xTickSpacing+xOffset),10)}rotate(o,0)}var canvasId="dot-matrix-canvas",yPoint,xPoint,yTicks,yTickSpacing,xTicks,xTickSpacing,points=[],radius=4;