function init(e){var t,i,a;(t=document.createElement("div")).setAttribute("class","dot-popup"),t.setAttribute("style","display: none;"),document.createElement("h4").innerHTML="Data",(i=document.createElement("div")).setAttribute("id","xValue"),(a=document.createElement("div")).setAttribute("id","yValue"),t.appendChild(i),t.appendChild(a),document.getElementById(e).appendChild(t)}function mouseMoveEvent(e){var t=e.offsetX,i=e.offsetY,a=document.getElementsByClassName("dot-popup")[0],n=document.getElementById("xValue"),r=document.getElementById("yValue"),s=!0;points.forEach(function(d){s&&(d.x<=t-radius/2&&t-radius/2<=d.x+2*radius&&d.y<=i-radius/2&&i-radius/2<=d.y+2*radius?(a.setAttribute("style","display: block; top: "+(e.clientY+10)+"px; left:"+(e.clientX+10)+"px;"),n.innerHTML=d.xTitle,r.innerHTML=d.yTitle,s=!1):a.setAttribute("style","display: none;"))}),s=!0}function getStringsWidth(e,t,i){var a=0,n=e.getContext("2d");return n.font="number"==typeof i?i+"px Arial":"10px Arial",Array.isArray(t)&&t.forEach(function(e,t){var i=n.measureText(e).width;i>a&&(a=i)}),a}function drawRect(e,t,i,a,n){e.getContext("2d").strokeRect(t,i,a,n)}function drawCircle(e,t,i,a,n,r){var s=e.getContext("2d");s.beginPath(),r&&(t+=a,i+=a),s.arc(t,i,a,0,2*Math.PI),s.fillStyle="string"==typeof n?n:"#FFFFFF",s.fill()}function drawText(e,t,i,a,n,r){var s=e.getContext("2d");s.textAlign=r||"start",s.font="number"==typeof n?n+"px Arial":"12px Arial",s.fillStyle="#000000",s.fillText(t,i,a),s.textAlign="start"}function drawLine(e,t,i,a,n){var r=e.getContext("2d");r.beginPath(),r.moveTo(t,i),r.lineTo(a,n),r.stroke()}function rotate(e,t){e.getContext("2d").rotate(t)}function drawGraph(e,t,i,a){init(e);var n=document.getElementById(e),r=getComputedStyle(n),s=parseInt(r.paddingTop.replace("px",""))+parseInt(r.paddingBottom.replace("px","")),d=parseInt(r.paddingLeft.replace("px",""))+parseInt(r.paddingRight.replace("px","")),i=Number.isInteger(i)?i:n.clientWidth-s,a=Number.isInteger(a)?a:n.clientHeight-d,c=document.getElementById(canvasId);c&&n.removeChild(c);var o=document.createElement("canvas");o.setAttribute("width",i),o.setAttribute("height",a),1!=t.dot_popup&&void 0!=t.dot_popup&&null!=t.dot_popup||o.addEventListener("mousemove",mouseMoveEvent),o.setAttribute("id",canvasId),n.appendChild(o);var f=.3*i,l=getStringsWidth(c=document.getElementById(canvasId),t.series.categories,12);drawCircle(c,f,8,4,"#009700",!0),drawText(c,t.series.categories[0],f+15,17,12),drawCircle(c,f+l+60,8,4,"#FF0000",!0),drawText(c,t.series.categories[1],f+l+75,17,12);var p=[];t.series.data.forEach(function(e,t){p.push(e.text)}),yOffset=.8*a,xOffset=10+getStringsWidth(c,p,12),yTicks=t.series.data.length,yTickSpacing=(yOffset-25)/(yTicks+1),xTicks=t.series.x.length,xTickSpacing=(i-xOffset)/(xTicks+1),drawLine(c,xOffset,25,xOffset,yOffset),drawLine(c,xOffset,yOffset,i,yOffset);for(var u=1;u<=xTicks;u++)drawLine(c,u*xTickSpacing+xOffset,yOffset,u*xTickSpacing+xOffset,yOffset+5);for(u=1;u<=yTicks;u++){x=yOffset-u*yTickSpacing;drawLine(c,xOffset,x,xOffset-5,x)}for(u=1;u<=yTicks;u++){var x=yOffset-u*yTickSpacing,g=xOffset-10;drawText(c,(k=t.series.data[u-1]).text,g,x,10,"right");for(var y=0;y<xTicks;y++){var m=k.values[y],T=xOffset+(y+1)*xTickSpacing,v=x,h=radius;drawCircle(c,T,v,h,m?"#009700":"#FF0000"),points.push({x:T-h,y:v-h,xTitle:1==k.values[y]?t.series.categories[0]:t.series.categories[1],yTitle:k.text})}}for(rotate(c,Math.PI/2),u=1;u<=xTicks;u++){var k=t.series.x[u-1];drawText(c,k,yOffset+10,-1*(u*xTickSpacing+xOffset),10)}rotate(c,0)}var canvasId="dot-matrix-canvas",yPoint,xPoint,yTicks,yTickSpacing,xTicks,xTickSpacing,points=[],radius=4;