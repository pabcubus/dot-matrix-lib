function init(e){var t,i,s;(t=document.createElement("div")).setAttribute("class","dot-popup"),t.setAttribute("style","display: none;"),document.createElement("h4").innerHTML="Data",(i=document.createElement("div")).setAttribute("id","xValue"),(s=document.createElement("div")).setAttribute("id","yValue"),t.appendChild(i),t.appendChild(s);var a=document.getElementById(e);a.setAttribute("style","position: relative;"),a.appendChild(t)}function mouseMoveEvent(e){var t=e.offsetX,i=e.offsetY,s=document.getElementsByClassName("dot-popup")[0],a=document.getElementById("xValue"),n=document.getElementById("yValue"),r=!0;points.forEach(function(o){r&&(o.x<=t-radius/2&&t-radius/2<=o.x+2*radius&&o.y<=i-radius/2&&i-radius/2<=o.y+2*radius?(s.setAttribute("style","display: block; top: "+(e.offsetY+10)+"px; left:"+(e.offsetX+10)+"px;"),a.innerHTML=o.xTitle,n.innerHTML=o.yTitle,r=!1):s.setAttribute("style","display: none;"))}),r=!0}function getStringsWidth(e,t,i){var s=0,a=e.getContext("2d");return a.font="number"==typeof i?i+"px Arial":"10px Arial",Array.isArray(t)&&t.forEach(function(e,t){var i=a.measureText(e).width;i>s&&(s=i)}),s}function drawRect(e,t,i,s,a){e.getContext("2d").strokeRect(t,i,s,a)}function drawCircle(e,t,i,s,a,n){var r=e.getContext("2d");r.beginPath(),n&&(t+=s,i+=s),r.arc(t,i,s,0,2*Math.PI),r.fillStyle="string"==typeof a?a:"#FFFFFF",r.fill()}function drawText(e,t,i,s,a,n){var r=e.getContext("2d");r.textAlign=n||"start",r.font="number"==typeof a?a+"px Arial":"12px Arial",r.fillStyle="#000000",r.fillText(t,i,s),r.textAlign="start"}function drawLine(e,t,i,s,a){var n=e.getContext("2d");n.beginPath(),n.moveTo(t,i),n.lineTo(s,a),n.stroke()}function rotate(e,t){e.getContext("2d").rotate(t)}function drawGraph(e,t){init(e),points=[],yTicks=t.series.data.length,xTicks=t.series.x.length;var i,s,a=document.getElementById(e),n=getComputedStyle(a),r=parseInt(n.paddingTop.replace("px",""))+parseInt(n.paddingBottom.replace("px","")),o=parseInt(n.paddingLeft.replace("px",""))+parseInt(n.paddingRight.replace("px",""));i=void 0!==t.size&&"string"==typeof t.size.width&&"auto"==t.size.width?(thisFontSize+4)*xTicks:void 0!==t.size&&"number"==typeof t.size.width?t.size.width:a.clientWidth-r,s=void 0!==t.size&&"string"==typeof t.size.height&&"auto"==t.size.height?(thisFontSize+4)*yTicks:void 0!==t.size&&"number"==typeof t.size.height?t.size.height:a.clientHeight-o;var d=document.getElementById(canvasId);d&&a.removeChild(d);var c=document.createElement("canvas");c.setAttribute("width",i),c.setAttribute("height",s),1!=t.dot_popup&&void 0!=t.dot_popup&&null!=t.dot_popup||c.addEventListener("mousemove",mouseMoveEvent),c.setAttribute("id",canvasId),a.appendChild(c);var f=.3*i,p=getStringsWidth(d=document.getElementById(canvasId),t.series.categories,12);drawCircle(d,f,8,4,"#009700",!0),drawText(d,t.series.categories[0],f+15,17,12),drawCircle(d,f+p+60,8,4,"#FF0000",!0),drawText(d,t.series.categories[1],f+p+75,17,12);var l=[];t.series.data.forEach(function(e,t){l.push(e.text)}),yOffset=.8*s,xOffset=10+getStringsWidth(d,l,12),yTickSpacing=(yOffset-25)/(yTicks+1),xTickSpacing=(i-xOffset)/(xTicks+1),drawLine(d,xOffset,25,xOffset,yOffset),drawLine(d,xOffset,yOffset,i,yOffset);for(var u=1;u<=xTicks;u++)drawLine(d,u*xTickSpacing+xOffset,yOffset,u*xTickSpacing+xOffset,yOffset+5);for(u=1;u<=yTicks;u++){x=yOffset-u*yTickSpacing;drawLine(d,xOffset,x,xOffset-5,x)}for(u=1;u<=yTicks;u++){var x=yOffset-u*yTickSpacing,g=xOffset-10;drawText(d,(k=t.series.data[u-1]).text,g,x,thisFontSize,"right");for(var y=0;y<xTicks;y++){var h=k.values[y],v=xOffset+(y+1)*xTickSpacing,T=x,m=radius;drawCircle(d,v,T,m,h?"#009700":"#FF0000"),points.push({x:v-m,y:T-m,xTitle:1==k.values[y]?t.series.categories[0]:t.series.categories[1],yTitle:k.text})}}for(rotate(d,Math.PI/2),u=1;u<=xTicks;u++){var k=t.series.x[u-1];drawText(d,k,yOffset+10,-1*(u*xTickSpacing+xOffset),thisFontSize)}rotate(d,0)}var canvasId="dot-matrix-canvas",yPoint,xPoint,yTicks,yTickSpacing,xTicks,xTickSpacing,points=[],radius=4,thisFontSize=10;